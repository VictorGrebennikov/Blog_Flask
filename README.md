## `MVC` 
**MVC** - <u>Model View Controller</u>

- Model - это модуль который отвечает за описание данных которые хранятся в БД
- View - отвечает за отображение пользователю данных
- Controller - связующее звено между пользователем, БД и приложением. Обрабатывает запросы.

Здесь View это Controller, а за отображение (View) отвечает Templates. 

Разберём код ниже:

```py
@app.route('/') 
def index():
    return "Hi"
```

При выполнении этого кода создаётся словарь вида `{'/': 'index'}`. На соответствующий запрос пользователя вида `'/'` Flask ищет значение в этом словаре. Значением является та функция, который этот запрос должна обрабатывать (здесь `index()`).

Для разных маршрутов можно указать одинаковое поведение. Например:

```py
@app.route('/')
@app.route('/blog')
def index():
    return "Hi"
```

При этом в словаре будет уже два ключ - значение:

`{'/':'index',  
'/blog':'index'}`  


## `Blueprint` (эскиз)
**Blueprint** - <u> это кусок какой-то изолированной функциональности.</u>
Это на столько изолированый код, что его можно просто скопировать в другой проект. Например это может быть система комментариев или система рейтингов.

#### Помещаем в переменную posts экземпляр класса Blueprint
```py
posts = Blueprint('posts', __name__, template_folder='templates')
```
Передаём в конструктор класса Blueprint следующие параметры:  

`'posts'` - Название блюпринта.  
`__name__` - точно так же как и при создании экземпляра класса Flask, мы делаем и для Blueprint. Отталкиваясь от пути к текущему файлу Flask будет находить шаблоны и другие файлы, которые необходимы для работы Blueprint.  
`template_folder='templates'` - указываем место, где будут хранться шаблоны.

#### В файле app.py импортируем наш Blueprint:

```py
from posts.blueprint import posts
```

 from posts.blueprint - указываем папку posts и через точку название модуля blueprint без расширения. import posts - экземпляр класса Blueprint, который находится в переменной posts, импортируем в файл app.py.

 #### В файле app.py регистрируем Blueprint:

 ```py
 app.register_blueprint(posts, url_prefix='/blog')
 ```

 Передаём несколько аргументов:

 `posts` - переменную posts в которой находится экземпляр класса Blueprint.  
 `url_prefix='/blog'` - часть url. Это путь до нашего блюпринта. Когда будет написан соответствующая **вьюха**, то по этому адресу будет выдан необходимый шаблон.

 #### В файле base.html

```html
<a class="navbar-brand" href=" {{ url_for('index') }} ">Flask</a> 
```

`{{ url_for('index') }}` - в аргумент функции url_for нужно передать название той функции которая будет обрабатывать соответствующий запрос. Передаём туда функцию **index**, которая находится в файле **view.py** т.к. она обрабатывает запрос к домену. В аргументы необходимо передавать не шаблон, а название той вьюхи, которая обрабатывает соответствующий запрос.

```html
<a class="nav-link active" aria-current="page" href=" {{ url_for('posts.index') }} ">Blog</a>
```

`{{ url_for('posts.index') }}` - указываем ссылку на вьюху в файле **blueprint.py**. **posts** - название блюпринта которое мы ему дали. **index** - функция которая отрабатывает запрос пользователя.  
Вьюха находится в файле **blueprint.py** и в приложении flask он у нас зарегистрирован под именем **posts** (название передано первым агрументом). После точки делаем указывам ту функцию, которая непосредтвенно отрабатывает запрос пользователя (index).